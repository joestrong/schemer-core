var schemer={};schemer.mesh={},schemer.mesh.getMeshFromString=function(a,b){if(a.indexOf(".json")){var c=new THREE.JSONLoader;c.load("/app/"+a,b)}},schemer.primitives={},schemer.primitives.box=new THREE.BoxGeometry(1,1,1),schemer.materials={},schemer.materials["default"]=new THREE.MeshBasicMaterial({color:16777215,wireframe:!0}),schemer.textures={files:[],texture:{},loadCount:0,preload:function(a){this.loadTextures(this.files,function(){a()})},loadTextures:function(a,b){if(a.length>0)for(var c=0;c<a.length;c++)this.loadTexture(a[c],b);else b()},loadTexture:function(a,b){THREE.ImageUtils.loadTexture("/app/textures/"+a,void 0,function(c){this.texture[a]=c,this.textureLoaded(b)}.bind(this))},textureLoaded:function(a){this.loadCount++,this.loadCount==this.files.length&&a()}},schemer.scene=function(){},schemer.scene.prototype={objects:[],init:function(){},addObject:function(a){a.init(),this.objects.push(a),"string"==typeof a.mesh?schemer.mesh.getMeshFromString(a.mesh,function(b){schemer.renderer.addMesh({geometry:b,material:a.material})}):schemer.renderer.addMesh({geometry:a.mesh,material:a.material})}},schemer.object=function(){},schemer.object.prototype={mesh:null,material:schemer.materials["default"],init:function(){}},schemer.autoloader={coreFiles:["gen/textures"],autoload:function(a){this.loadScript("gen/autoload",function(){this.loadFiles(function(){a()})}.bind(this))},loadFiles:function(a){function b(){c++,c==d.length&&a()}var c=0,d=this.coreFiles.concat(schemer.autoloader.files);if(d.length>0)for(var e=0;e<d.length;e++)this.loadScript(d[e],b);else a()},loadScript:function(a,b){var c=document.querySelector("head"),d=document.createElement("script");d.src=a+".js",b&&(d.onreadystatechange=b,d.onload=b),c.appendChild(d)}},schemer.renderer={scene:null,camera:null,renderer:null,init:function(){this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(75,schemer.config.canvas.width/schemer.config.canvas.height,.1,1e3),this.camera.position.y=2,this.camera.position.z=5,this.renderer=new THREE.WebGLRenderer,this.renderer.setSize(schemer.config.canvas.width,schemer.config.canvas.height),document.body.appendChild(this.renderer.domElement);var a=function(){requestAnimationFrame(a),this.renderer.render(this.scene,this.camera)}.bind(this);a()},addMesh:function(a){var b=a.geometry,c=a.material,d=new THREE.Mesh(b,c);this.scene.add(d)}},schemer.run=function(){schemer.renderer.init();var a=window[schemer.config.start];a.init()},function(){schemer.autoloader.autoload(function(){schemer.textures.preload(function(){schemer.run()})})}();