var gameengine={};gameengine.mesh={},gameengine.mesh.getMeshFromString=function(a,b){if(a.indexOf(".json")){var c=new THREE.JSONLoader;c.load("/app/"+a,b)}},gameengine.primitives={},gameengine.primitives.box=new THREE.BoxGeometry(1,1,1),gameengine.materials={},gameengine.materials["default"]=new THREE.MeshBasicMaterial({color:16777215,wireframe:!0}),gameengine.textures={files:[],texture:{},loadCount:0,preload:function(a){this.loadTextures(this.files,function(){a()})},loadTextures:function(a,b){if(a.length>0)for(var c=0;c<a.length;c++)this.loadTexture(a[c],b);else b()},loadTexture:function(a,b){THREE.ImageUtils.loadTexture("/app/textures/"+a,void 0,function(c){this.texture[a]=c,this.textureLoaded(b)}.bind(this))},textureLoaded:function(a){this.loadCount++,this.loadCount==this.files.length&&a()}},gameengine.scene=function(){},gameengine.scene.prototype={objects:[],init:function(){},addObject:function(a){a.init(),this.objects.push(a),"string"==typeof a.mesh?gameengine.mesh.getMeshFromString(a.mesh,function(b){gameengine.renderer.addMesh({geometry:b,material:a.material})}):gameengine.renderer.addMesh({geometry:a.mesh,material:a.material})}},gameengine.object=function(){},gameengine.object.prototype={mesh:null,material:gameengine.materials["default"],init:function(){}},gameengine.autoloader={coreFiles:["gen/textures"],autoload:function(a){this.loadScript("gen/autoload",function(){this.loadFiles(function(){a()})}.bind(this))},loadFiles:function(a){function b(){c++,c==d.length&&a()}var c=0,d=this.coreFiles.concat(gameengine.autoloader.files);if(d.length>0)for(var e=0;e<d.length;e++)this.loadScript(d[e],b);else a()},loadScript:function(a,b){var c=document.querySelector("head"),d=document.createElement("script");d.src=a+".js",b&&(d.onreadystatechange=b,d.onload=b),c.appendChild(d)}},gameengine.renderer={scene:null,camera:null,renderer:null,init:function(){this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(75,gameengine.config.canvas.width/gameengine.config.canvas.height,.1,1e3),this.camera.position.y=2,this.camera.position.z=5,this.renderer=new THREE.WebGLRenderer,this.renderer.setSize(gameengine.config.canvas.width,gameengine.config.canvas.height),document.body.appendChild(this.renderer.domElement);var a=function(){requestAnimationFrame(a),this.renderer.render(this.scene,this.camera)}.bind(this);a()},addMesh:function(a){var b=a.geometry,c=a.material,d=new THREE.Mesh(b,c);this.scene.add(d)}},gameengine.run=function(){gameengine.renderer.init();var a=window[gameengine.config.start];a.init()},function(){gameengine.autoloader.autoload(function(){gameengine.textures.preload(function(){gameengine.run()})})}();